<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - St. Lawrence Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/admin-style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="admin-wrapper">
        <!-- Advanced Sidebar with Dropdowns -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="../../img/5.jpg" alt="School Logo" class="sidebar-logo">
                    <div>
                        <h2>St. Lawrence</h2>
                        <h2>Junior School</h2>
                        <p class="school-location">Kabowa</p>
                    </div>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-item active">
                    <span class="icon"><i class="fas fa-chart-line"></i></span>
                    <span>Dashboard</span>
                </a>
                
                <!-- Students Management Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'students')">
                        <span class="icon"><i class="fas fa-user-graduate"></i></span>
                        <span>Students</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="students-dropdown">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-list"></i>
                            <span>All Students</span>
                        </a>
                        <a href="admissions.html" class="dropdown-item">
                            <i class="fas fa-user-plus"></i>
                            <span>Admissions</span>
                            <span class="badge">12</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-clipboard-check"></i>
                            <span>Attendance</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-award"></i>
                            <span>Performance</span>
                        </a>
                    </div>
                </div>
                
                <!-- Staff Management Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'staff')">
                        <span class="icon"><i class="fas fa-users"></i></span>
                        <span>Staff Management</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="staff-dropdown">
                        <a href="teachers.html" class="dropdown-item">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <span>Teachers</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user-tie"></i>
                            <span>Administrators</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user-clock"></i>
                            <span>Staff Attendance</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>Payroll</span>
                        </a>
                    </div>
                </div>
                
                <!-- Academics Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'academics')">
                        <span class="icon"><i class="fas fa-graduation-cap"></i></span>
                        <span>Academics</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="academics-dropdown">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-book-open"></i>
                            <span>Classes</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-chalkboard"></i>
                            <span>Subjects</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-calendar-week"></i>
                            <span>Timetable</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-file-alt"></i>
                            <span>Exams & Results</span>
                        </a>
                    </div>
                </div>
                
                <!-- Content Management Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'content')">
                        <span class="icon"><i class="fas fa-folder-open"></i></span>
                        <span>Content</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="content-dropdown">
                        <a href="events.html" class="dropdown-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Events</span>
                        </a>
                        <a href="library.html" class="dropdown-item">
                            <i class="fas fa-book"></i>
                            <span>Library</span>
                        </a>
                        <a href="gallery.html" class="dropdown-item">
                            <i class="fas fa-images"></i>
                            <span>Gallery</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-newspaper"></i>
                            <span>News & Updates</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-bullhorn"></i>
                            <span>Announcements</span>
                        </a>
                    </div>
                </div>
                
                <!-- Finance Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'finance')">
                        <span class="icon"><i class="fas fa-dollar-sign"></i></span>
                        <span>Finance</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="finance-dropdown">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-receipt"></i>
                            <span>Fee Collection</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <span>Invoices</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-chart-pie"></i>
                            <span>Expenses</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-wallet"></i>
                            <span>Budget</span>
                        </a>
                    </div>
                </div>
                
                <!-- Communications Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'comms')">
                        <span class="icon"><i class="fas fa-comments"></i></span>
                        <span>Communications</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="comms-dropdown">
                        <a href="contacts.html" class="dropdown-item">
                            <i class="fas fa-envelope"></i>
                            <span>Contact Messages</span>
                            <span class="badge">5</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-sms"></i>
                            <span>SMS</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-envelope-open-text"></i>
                            <span>Email</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-bell"></i>
                            <span>Notifications</span>
                        </a>
                    </div>
                </div>
                
                <!-- Reports & Analytics -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'reports')">
                        <span class="icon"><i class="fas fa-chart-bar"></i></span>
                        <span>Reports</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="reports-dropdown">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-file-chart-line"></i>
                            <span>Academic Reports</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-chart-area"></i>
                            <span>Financial Reports</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user-chart"></i>
                            <span>Attendance Reports</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-analytics"></i>
                            <span>Analytics</span>
                        </a>
                    </div>
                </div>
                
                <!-- Settings Dropdown -->
                <div class="nav-dropdown">
                    <a href="#" class="nav-item" onclick="toggleDropdown(event, 'settings')">
                        <span class="icon"><i class="fas fa-cog"></i></span>
                        <span>Settings</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </a>
                    <div class="dropdown-menu" id="settings-dropdown">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-school"></i>
                            <span>School Info</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-palette"></i>
                            <span>Appearance</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>Security</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-database"></i>
                            <span>Backup & Restore</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-users-cog"></i>
                            <span>User Roles</span>
                        </a>
                    </div>
                </div>
                
                <div class="nav-divider"></div>
                
                <a href="#" class="nav-item logout-btn" onclick="logout()">
                    <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>

        <!-- Vertical Icon Rail (Right Side) -->
        <aside class="icon-rail">
            <div class="rail-item" data-tooltip="Dashboard" onclick="window.location.href='dashboard.html'">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="rail-item" data-tooltip="Students">
                <i class="fas fa-user-graduate"></i>
            </div>
            <div class="rail-item" data-tooltip="Teachers" onclick="window.location.href='teachers.html'">
                <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <div class="rail-item" data-tooltip="Events" onclick="window.location.href='events.html'">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <div class="rail-item" data-tooltip="Library" onclick="window.location.href='library.html'">
                <i class="fas fa-book"></i>
            </div>
            <div class="rail-item" data-tooltip="Gallery" onclick="window.location.href='gallery.html'">
                <i class="fas fa-images"></i>
            </div>
            <div class="rail-divider"></div>
            <div class="rail-item" data-tooltip="Notifications">
                <i class="fas fa-bell"></i>
                <span class="rail-badge">3</span>
            </div>
            <div class="rail-item" data-tooltip="Messages">
                <i class="fas fa-envelope"></i>
                <span class="rail-badge">5</span>
            </div>
            <div class="rail-item" data-tooltip="Finance">
                <i class="fas fa-dollar-sign"></i>
            </div>
            <div class="rail-item" data-tooltip="Reports">
                <i class="fas fa-chart-bar"></i>
            </div>
            <div class="rail-divider"></div>
            <div class="rail-item" data-tooltip="Settings">
                <i class="fas fa-cog"></i>
            </div>
            <div class="rail-item" data-tooltip="Help & Support">
                <i class="fas fa-question-circle"></i>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="top-bar-left">
                    <button class="menu-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="breadcrumb">
                        <i class="fas fa-home"></i>
                        <span class="breadcrumb-separator">/</span>
                        <span class="breadcrumb-current">Dashboard</span>
                    </div>
                </div>
                
                <div class="top-bar-center">
                    <!-- Greeting Card -->
                    <div class="nav-card greeting-card">
                        <div class="greeting-icon" id="greetingIcon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="greeting-content">
                            <span class="greeting-text" id="greetingText">Good Morning</span>
                            <span class="greeting-name" id="greetingName">Admin User</span>
                        </div>
                    </div>
                    
                    <!-- Date & Time Card -->
                    <div class="nav-card datetime-card">
                        <div class="datetime-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="datetime-content">
                            <span class="datetime-date" id="currentDate">Loading...</span>
                            <span class="datetime-time" id="currentTime">--:--</span>
                        </div>
                    </div>
                </div>
                
                <div class="top-bar-right">
                    <div class="nav-actions">
                        <button class="nav-action-btn" data-tooltip="Notifications">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        
                        <button class="nav-action-btn" data-tooltip="Messages">
                            <i class="fas fa-envelope"></i>
                            <span class="notification-badge">5</span>
                        </button>
                        
                        <button class="nav-action-btn" data-tooltip="Quick Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        
                        <div class="nav-divider"></div>
                        
                        <div class="user-menu">
                            <div class="user-profile-btn" onclick="toggleUserMenu()">
                                <div class="user-avatar-nav">
                                    <img src="../../img/5.jpg" alt="Admin" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                    <div class="avatar-fallback" style="display: none;">
                                        <i class="fas fa-user"></i>
                                    </div>
                                </div>
                                <div class="user-info-nav">
                                    <span class="user-name-nav" id="userName">Admin User</span>
                                    <span class="user-role-nav">Administrator</span>
                                </div>
                                <i class="fas fa-chevron-down user-dropdown-arrow"></i>
                            </div>
                            
                            <div class="user-dropdown" id="userDropdown">
                                <div class="user-dropdown-header">
                                    <div class="user-avatar-large">
                                        <img src="../../img/5.jpg" alt="Admin">
                                    </div>
                                    <div>
                                        <div class="dropdown-user-name">Admin User</div>
                                        <div class="dropdown-user-email">admin@stlawrence.edu</div>
                                    </div>
                                </div>
                                <div class="user-dropdown-divider"></div>
                                <a href="#" class="user-dropdown-item">
                                    <i class="fas fa-user"></i>
                                    <span>My Profile</span>
                                </a>
                                <a href="#" class="user-dropdown-item">
                                    <i class="fas fa-cog"></i>
                                    <span>Settings</span>
                                </a>
                                <a href="#" class="user-dropdown-item">
                                    <i class="fas fa-question-circle"></i>
                                    <span>Help & Support</span>
                                </a>
                                <div class="user-dropdown-divider"></div>
                                <a href="#" class="user-dropdown-item logout-item" onclick="logout()">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span>Logout</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="content">
                <!-- Simple Page Header -->
                <div class="simple-header">
                    <div class="header-left">
                        <h1 class="dashboard-title">Dashboard</h1>
                        <p class="dashboard-subtitle">Overview of your school management system</p>
                    </div>
                </div>

                <!-- Stats Grid - Enhanced -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-content">
                            <div class="stat-info">
                                <p class="stat-label">Total Students</p>
                                <h3 class="stat-value" id="totalStudents">0</h3>
                                <span class="stat-change positive"><i class="fas fa-arrow-up"></i> <span id="studentGrowth">0%</span> from last term</span>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="progress-bar" id="studentProgress" style="width: 0%"></div>
                        </div>
                        <div class="stat-footer">
                            <span><i class="fas fa-male"></i> <span id="maleStudents">0</span> Boys</span>
                            <span><i class="fas fa-female"></i> <span id="femaleStudents">0</span> Girls</span>
                        </div>
                    </div>
                    
                    <div class="stat-card red">
                        <div class="stat-content">
                            <div class="stat-info">
                                <p class="stat-label">Total Teachers</p>
                                <h3 class="stat-value" id="totalTeachers">0</h3>
                                <span class="stat-change positive"><i class="fas fa-arrow-up"></i> <span id="teacherGrowth">0%</span> from last month</span>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-chalkboard-teacher"></i>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="progress-bar" id="teacherProgress" style="width: 0%"></div>
                        </div>
                        <div class="stat-footer">
                            <span><i class="fas fa-check-circle"></i> <span id="activeTeachers">0</span> Active</span>
                            <span><i class="fas fa-clock"></i> <span id="leaveTeachers">0</span> On Leave</span>
                        </div>
                    </div>
                    
                    <div class="stat-card green">
                        <div class="stat-content">
                            <div class="stat-info">
                                <p class="stat-label">Attendance Today</p>
                                <h3 class="stat-value" id="attendanceRate">0%</h3>
                                <span class="stat-change positive"><i class="fas fa-arrow-up"></i> <span id="attendanceGrowth">0%</span> from yesterday</span>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="progress-bar" id="attendanceProgress" style="width: 0%"></div>
                        </div>
                        <div class="stat-footer">
                            <span><i class="fas fa-user-check"></i> <span id="presentStudents">0</span> Present</span>
                            <span><i class="fas fa-user-times"></i> <span id="absentStudents">0</span> Absent</span>
                        </div>
                    </div>
                    
                    <div class="stat-card purple">
                        <div class="stat-content">
                            <div class="stat-info">
                                <p class="stat-label">Revenue This Month</p>
                                <h3 class="stat-value" id="revenue">$0</h3>
                                <span class="stat-change positive"><i class="fas fa-arrow-up"></i> <span id="revenueGrowth">0%</span> from last month</span>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                        </div>
                        <div class="stat-progress">
                            <div class="progress-bar" id="revenueProgress" style="width: 0%"></div>
                        </div>
                        <div class="stat-footer">
                            <span><i class="fas fa-check"></i> $<span id="collectedRevenue">0</span> Collected</span>
                            <span><i class="fas fa-hourglass-half"></i> $<span id="pendingRevenue">0</span> Pending</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Section -->
                <div class="section quick-actions-section full-width">
                    <div class="section-header-inline">
                        <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
                        <span class="section-badge">Shortcuts</span>
                    </div>
                    <div class="quick-actions-grid">
                            <a href="teachers.html" class="action-card blue">
                                <div class="action-card-header">
                                    <div class="action-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <span class="action-badge">New</span>
                                </div>
                                <div class="action-content">
                                    <h4>Add Teacher</h4>
                                    <p>Register new staff member to the system</p>
                                </div>
                                <div class="action-footer">
                                    <span class="action-link">Get Started <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                            <a href="events.html" class="action-card red">
                                <div class="action-card-header">
                                    <div class="action-icon">
                                        <i class="fas fa-calendar-plus"></i>
                                    </div>
                                    <span class="action-badge">Popular</span>
                                </div>
                                <div class="action-content">
                                    <h4>Create Event</h4>
                                    <p>Schedule and manage school events</p>
                                </div>
                                <div class="action-footer">
                                    <span class="action-link">Get Started <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                            <a href="library.html" class="action-card green">
                                <div class="action-card-header">
                                    <div class="action-icon">
                                        <i class="fas fa-file-upload"></i>
                                    </div>
                                    <span class="action-badge">Quick</span>
                                </div>
                                <div class="action-content">
                                    <h4>Upload PDF</h4>
                                    <p>Add educational resources to library</p>
                                </div>
                                <div class="action-footer">
                                    <span class="action-link">Get Started <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                            <a href="gallery.html" class="action-card purple">
                                <div class="action-card-header">
                                    <div class="action-icon">
                                        <i class="fas fa-image"></i>
                                    </div>
                                    <span class="action-badge">Media</span>
                                </div>
                                <div class="action-content">
                                    <h4>Add Image</h4>
                                    <p>Upload photos to school gallery</p>
                                </div>
                                <div class="action-footer">
                                    <span class="action-link">Get Started <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                            <a href="#" class="action-card orange">
                                <div class="action-card-header">
                                    <div class="action-icon">
                                        <i class="fas fa-user-graduate"></i>
                                    </div>
                                    <span class="action-badge">Hot</span>
                                </div>
                                <div class="action-content">
                                    <h4>Add Student</h4>
                                    <p>Enroll new student to the school</p>
                                </div>
                                <div class="action-footer">
                                    <span class="action-link">Get Started <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                            <a href="#" class="action-card teal">
                                <div class="action-card-header">
                                    <div class="action-icon">
                                        <i class="fas fa-bullhorn"></i>
                                    </div>
                                    <span class="action-badge">Alert</span>
                                </div>
                                <div class="action-content">
                                    <h4>Send Notice</h4>
                                    <p>Broadcast announcement to parents</p>
                                </div>
                                <div class="action-footer">
                                    <span class="action-link">Get Started <i class="fas fa-arrow-right"></i></span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Bottom Grid - Two Columns -->
                <div class="bottom-grid">
                    <!-- Recent Activity Section -->
                    <div class="section activity-section">
                        <div class="section-header-inline">
                            <h2><i class="fas fa-history"></i> Recent Activity</h2>
                            <a href="#" class="view-all-link">View All <i class="fas fa-arrow-right"></i></a>
                        </div>
                        <div class="activity-timeline" id="activityList">
                            <p class="loading">Loading activity...</p>
                        </div>
                    </div>

                    <!-- Data Distribution Chart Section -->
                    <div class="section chart-section">
                        <div class="section-header-inline">
                            <h2><i class="fas fa-chart-pie"></i> Data Distribution</h2>
                            <select class="chart-filter">
                                <option>This Month</option>
                                <option>Last Month</option>
                                <option>This Year</option>
                            </select>
                        </div>
                        <div class="chart-container">
                            <canvas id="distributionPieChart"></canvas>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background: #1e4d9f;"></span>
                                <span class="legend-label">Students</span>
                                <span class="legend-value" id="legendStudents">0</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #dc3545;"></span>
                                <span class="legend-label">Teachers</span>
                                <span class="legend-value" id="legendTeachers">0</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #10b981;"></span>
                                <span class="legend-label">Events</span>
                                <span class="legend-value" id="legendEvents">0</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #ff8c00;"></span>
                                <span class="legend-label">Library</span>
                                <span class="legend-value" id="legendLibrary">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Word of the Day Section -->
                <div class="section word-of-day-section">
                    <div class="word-header">
                        <i class="fas fa-quote-left quote-icon"></i>
                        <h2>Word of the Day</h2>
                    </div>
                    <div class="word-content">
                        <div class="author-avatar">
                            <img src="../../img/5.jpg" alt="Nelson Mandela">
                        </div>
                        <blockquote class="word-quote">
                            "Education is the passport to the future, for tomorrow belongs to those who prepare for it today."
                        </blockquote>
                        <div class="word-author">
                            <span class="author-dash">â€”</span>
                            <span class="author-name">Nelson Mandela</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script>
        // Load Dashboard Statistics
        async function loadDashboardStats() {
            try {
                // Load Teachers Count
                const teachersData = await apiRequest('/teachers/list.php');
                if (teachersData && teachersData.success) {
                    const totalTeachers = teachersData.data.length;
                    document.getElementById('totalTeachers').textContent = totalTeachers;
                    document.getElementById('activeTeachers').textContent = totalTeachers;
                    document.getElementById('leaveTeachers').textContent = '0';
                    document.getElementById('teacherProgress').style.width = '75%';
                    document.getElementById('teacherGrowth').textContent = '12%';
                }

                // Load Events Count
                const eventsData = await apiRequest('/events/list.php');
                if (eventsData && eventsData.success) {
                    document.getElementById('totalEvents').textContent = eventsData.data.length;
                }

                // Load Library Count
                const libraryData = await apiRequest('/library/list.php');
                if (libraryData && libraryData.success) {
                    document.getElementById('totalLibrary').textContent = libraryData.data.length;
                }

                // Load Gallery Count
                const galleryData = await apiRequest('/gallery/list.php');
                if (galleryData && galleryData.success) {
                    document.getElementById('totalGallery').textContent = galleryData.data.length;
                }

                // Simulate Students Data (you can replace with actual API)
                const totalStudents = 1245;
                const maleStudents = 645;
                const femaleStudents = 600;
                document.getElementById('totalStudents').textContent = totalStudents.toLocaleString();
                document.getElementById('maleStudents').textContent = maleStudents;
                document.getElementById('femaleStudents').textContent = femaleStudents;
                document.getElementById('studentProgress').style.width = '85%';
                document.getElementById('studentGrowth').textContent = '8.5%';

                // Simulate Attendance Data
                const attendanceRate = 94.5;
                const presentStudents = 1176;
                const absentStudents = 69;
                document.getElementById('attendanceRate').textContent = attendanceRate + '%';
                document.getElementById('presentStudents').textContent = presentStudents;
                document.getElementById('absentStudents').textContent = absentStudents;
                document.getElementById('attendanceProgress').style.width = attendanceRate + '%';
                document.getElementById('attendanceGrowth').textContent = '2.3%';

                // Simulate Revenue Data
                const totalRevenue = 45890;
                const collectedRevenue = 42500;
                const pendingRevenue = 3390;
                document.getElementById('revenue').textContent = '$' + totalRevenue.toLocaleString();
                document.getElementById('collectedRevenue').textContent = collectedRevenue.toLocaleString();
                document.getElementById('pendingRevenue').textContent = pendingRevenue.toLocaleString();
                document.getElementById('revenueProgress').style.width = '78%';
                document.getElementById('revenueGrowth').textContent = '15.8%';

            } catch (error) {
                console.error('Error loading dashboard stats:', error);
            }
        }

        // Load Upcoming Events
        // Load Recent Activity
        async function loadRecentActivity() {
            try {
                const activityList = document.getElementById('activityList');
                const activities = [];
                
                // Get recent teachers
                const teachersData = await apiRequest('/teachers/list.php');
                if (teachersData && teachersData.success && teachersData.data.length > 0) {
                    const recentTeacher = teachersData.data[0];
                    activities.push({
                        type: 'teacher',
                        title: `<strong>New Teacher</strong> - ${recentTeacher.name} joined staff`,
                        time: getRelativeTime(recentTeacher.created_at),
                        color: 'blue'
                    });
                }
                
                // Get recent events
                const eventsData = await apiRequest('/events/list.php');
                if (eventsData && eventsData.success && eventsData.data.length > 0) {
                    const recentEvent = eventsData.data[0];
                    activities.push({
                        type: 'event',
                        title: `<strong>Event Created</strong> - ${recentEvent.title} scheduled`,
                        time: getRelativeTime(recentEvent.created_at),
                        color: 'red'
                    });
                }
                
                // Get recent library uploads
                const libraryData = await apiRequest('/library/list.php');
                if (libraryData && libraryData.success && libraryData.data.length > 0) {
                    const recentLibrary = libraryData.data[0];
                    activities.push({
                        type: 'library',
                        title: `<strong>Library Resource</strong> - ${recentLibrary.title} uploaded`,
                        time: getRelativeTime(recentLibrary.created_at),
                        color: 'green'
                    });
                }
                
                // Get recent gallery uploads
                const galleryData = await apiRequest('/gallery/list.php');
                if (galleryData && galleryData.success && galleryData.data.length > 0) {
                    const recentGallery = galleryData.data[0];
                    activities.push({
                        type: 'gallery',
                        title: `<strong>Gallery Image</strong> - ${recentGallery.title} uploaded`,
                        time: getRelativeTime(recentGallery.created_at),
                        color: 'purple'
                    });
                }
                
                // Sort by time and display
                if (activities.length > 0) {
                    activityList.innerHTML = activities.map(activity => `
                        <div class="timeline-item">
                            <div class="timeline-dot ${activity.color}"></div>
                            <div class="timeline-content">
                                <p class="timeline-title">${activity.title}</p>
                                <span class="timeline-time">${activity.time}</span>
                            </div>
                        </div>
                    `).join('');
                } else {
                    activityList.innerHTML = '<p class="no-data">No recent activity</p>';
                }
            } catch (error) {
                console.error('Error loading activity:', error);
                document.getElementById('activityList').innerHTML = '<p class="no-data">Failed to load activity</p>';
            }
        }

        // Helper function to get relative time
        function getRelativeTime(dateString) {
            if (!dateString) return 'Recently';
            
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            return date.toLocaleDateString();
        }

        // Background Color Rotation
        const bgColors = [
            '#f8f9fa', // Light gray
            '#f0f4f8', // Light blue-gray
            '#fef3e2', // Light cream
            '#f0fdf4', // Light mint
            '#fef2f2', // Light rose
            '#f5f3ff', // Light lavender
            '#fff7ed', // Light peach
            '#ecfdf5', // Light teal
            '#fdf4ff', // Light pink
            '#f0f9ff', // Light sky
            '#fffbeb', // Light yellow
            '#f1f5f9'  // Light slate
        ];

        function changeBgColor() {
            const now = new Date();
            const minutesSinceMidnight = now.getHours() * 60 + now.getMinutes();
            const colorIndex = Math.floor(minutesSinceMidnight / 5) % bgColors.length;
            document.querySelector('.main-content').style.background = bgColors[colorIndex];
            document.querySelector('.content').style.background = bgColors[colorIndex];
        }

        // Change background color immediately and every minute
        changeBgColor();
        setInterval(changeBgColor, 60000); // Check every minute

        // Load all dashboard data
        loadDashboardStats();
        loadRecentActivity();
        animateQuickStats();

        // Animate Quick Stats Progress Bars
        function animateQuickStats() {
            // Animate progress bars with delays
            setTimeout(() => {
                const eventsBar = document.getElementById('eventsBar');
                const eventsProgress = document.getElementById('eventsProgress');
                if (eventsBar && eventsProgress) {
                    const eventsPercent = 75;
                    eventsBar.style.width = eventsPercent + '%';
                    eventsProgress.textContent = eventsPercent + '%';
                }
            }, 300);

            setTimeout(() => {
                const libraryBar = document.getElementById('libraryBar');
                const libraryProgress = document.getElementById('libraryProgress');
                if (libraryBar && libraryProgress) {
                    const libraryPercent = 85;
                    libraryBar.style.width = libraryPercent + '%';
                    libraryProgress.textContent = libraryPercent + '%';
                }
            }, 500);

            setTimeout(() => {
                const galleryBar = document.getElementById('galleryBar');
                const galleryProgress = document.getElementById('galleryProgress');
                if (galleryBar && galleryProgress) {
                    const galleryPercent = 62;
                    galleryBar.style.width = galleryPercent + '%';
                    galleryProgress.textContent = galleryPercent + '%';
                }
            }, 700);

            setTimeout(() => {
                const messagesBar = document.getElementById('messagesBar');
                const messagesProgress = document.getElementById('messagesProgress');
                if (messagesBar && messagesProgress) {
                    const messagesPercent = 65;
                    messagesBar.style.width = messagesPercent + '%';
                    messagesProgress.textContent = messagesPercent + '%';
                }
            }, 900);
        }

        // Update Quick Stats with Real Data
        async function updateQuickStatsData() {
            try {
                // Update Events Count
                const eventsData = await apiRequest('/events/list.php');
                if (eventsData && eventsData.success) {
                    const totalEvents = eventsData.data.length;
                    document.getElementById('totalEvents').textContent = totalEvents;
                    
                    // Calculate progress (example: events this month vs total)
                    const thisMonth = eventsData.data.filter(e => {
                        const eventDate = new Date(e.event_date);
                        const now = new Date();
                        return eventDate.getMonth() === now.getMonth() && 
                               eventDate.getFullYear() === now.getFullYear();
                    }).length;
                    const eventsPercent = totalEvents > 0 ? Math.round((thisMonth / totalEvents) * 100) : 0;
                    document.getElementById('eventsBar').style.width = eventsPercent + '%';
                    document.getElementById('eventsProgress').textContent = eventsPercent + '%';
                }

                // Update Library Count
                const libraryData = await apiRequest('/library/list.php');
                if (libraryData && libraryData.success) {
                    const totalLibrary = libraryData.data.length;
                    document.getElementById('totalLibrary').textContent = totalLibrary;
                    
                    // Calculate availability percentage
                    const available = libraryData.data.filter(b => b.status === 'available').length;
                    const libraryPercent = totalLibrary > 0 ? Math.round((available / totalLibrary) * 100) : 0;
                    document.getElementById('libraryBar').style.width = libraryPercent + '%';
                    document.getElementById('libraryProgress').textContent = libraryPercent + '%';
                }

                // Update Gallery Count
                const galleryData = await apiRequest('/gallery/list.php');
                if (galleryData && galleryData.success) {
                    const totalGallery = galleryData.data.length;
                    document.getElementById('totalGallery').textContent = totalGallery;
                    
                    // Simulate storage usage
                    const storagePercent = Math.min(Math.round((totalGallery / 100) * 100), 100);
                    document.getElementById('galleryBar').style.width = storagePercent + '%';
                    document.getElementById('galleryProgress').textContent = storagePercent + '%';
                }

                // Messages count is static for now
                document.getElementById('totalMessages').textContent = '17';
            } catch (error) {
                console.error('Error updating quick stats:', error);
            }
        }

        // Call update function after initial animation
        setTimeout(updateQuickStatsData, 1500);

        // Update Greeting based on time of day
        function updateGreeting() {
            const hour = new Date().getHours();
            const greetingText = document.getElementById('greetingText');
            const greetingIcon = document.getElementById('greetingIcon');
            const userName = document.getElementById('userName').textContent;
            document.getElementById('greetingName').textContent = userName;
            
            let greeting = '';
            let icon = '';
            
            if (hour >= 5 && hour < 12) {
                greeting = 'Good Morning';
                icon = '<i class="fas fa-sun"></i>';
            } else if (hour >= 12 && hour < 17) {
                greeting = 'Good Afternoon';
                icon = '<i class="fas fa-cloud-sun"></i>';
            } else if (hour >= 17 && hour < 21) {
                greeting = 'Good Evening';
                icon = '<i class="fas fa-moon"></i>';
            } else {
                greeting = 'Good Night';
                icon = '<i class="fas fa-star"></i>';
            }
            
            greetingText.textContent = greeting;
            greetingIcon.innerHTML = icon;
        }

        // Update Date and Time
        function updateDateTime() {
            const now = new Date();
            
            // Format date
            const options = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' };
            const dateStr = now.toLocaleDateString('en-US', options);
            document.getElementById('currentDate').textContent = dateStr;
            
            // Format time
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            document.getElementById('currentTime').textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Initialize and update every second
        updateGreeting();
        updateDateTime();
        updateSimpleHeader();
        setInterval(updateDateTime, 1000);
        setInterval(updateGreeting, 60000); // Update greeting every minute
        setInterval(updateSimpleHeader, 1000); // Update simple header every second

        // Update Simple Header
        function updateSimpleHeader() {
            const now = new Date();
            
            // Update date
            const dateElement = document.getElementById('simpleDate');
            if (dateElement) {
                const options = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' };
                dateElement.textContent = now.toLocaleDateString('en-US', options);
            }
            
            // Update time
            const timeElement = document.getElementById('simpleTime');
            if (timeElement) {
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const seconds = now.getSeconds().toString().padStart(2, '0');
                timeElement.textContent = `${hours}:${minutes}:${seconds}`;
            }
        }

        // Update Hero Section
        function updateHeroSection() {
            const now = new Date();
            
            // Update hero user name
            const userName = document.getElementById('userName').textContent;
            const heroUserName = document.getElementById('heroUserName');
            if (heroUserName) {
                heroUserName.textContent = userName;
            }
            
            // Update hero date
            const heroDate = document.getElementById('heroDate');
            if (heroDate) {
                const options = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' };
                heroDate.textContent = now.toLocaleDateString('en-US', options);
            }
            
            // Update hero time
            const heroTime = document.getElementById('heroTime');
            if (heroTime) {
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const seconds = now.getSeconds().toString().padStart(2, '0');
                heroTime.textContent = `${hours}:${minutes}:${seconds}`;
            }
            
            // Update tasks complete (example calculation)
            const heroTasksComplete = document.getElementById('heroTasksComplete');
            if (heroTasksComplete) {
                // This could be calculated from actual data
                const tasksComplete = Math.floor(Math.random() * 10) + 5;
                heroTasksComplete.textContent = tasksComplete;
            }
        }

        // Toggle Sidebar
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('collapsed');
            document.querySelector('.main-content').classList.toggle('expanded');
        }

        // Toggle User Menu
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            if (!userMenu.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Dropdown Toggle Function
        function toggleDropdown(event, id) {
            event.preventDefault();
            const dropdown = document.getElementById(id + '-dropdown');
            const arrow = event.currentTarget.querySelector('.dropdown-arrow');
            const allDropdowns = document.querySelectorAll('.dropdown-menu');
            const allArrows = document.querySelectorAll('.dropdown-arrow');
            
            // Close all other dropdowns
            allDropdowns.forEach(d => {
                if (d !== dropdown) {
                    d.classList.remove('active');
                }
            });
            allArrows.forEach(a => {
                if (a !== arrow) {
                    a.classList.remove('rotated');
                }
            });
            
            // Toggle current dropdown
            dropdown.classList.toggle('active');
            arrow.classList.toggle('rotated');
        }

        // Quick Add Menu Function
        function showQuickAddMenu() {
            alert('Quick Add Menu - Coming Soon!\n\nYou can quickly add:\nâ€¢ New Student\nâ€¢ New Teacher\nâ€¢ New Event\nâ€¢ Library Resource\nâ€¢ Gallery Image');
        }

        // Initialize Pie Chart
        const pieCtx = document.getElementById('distributionPieChart');
        if (pieCtx) {
            const pieChart = new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Students', 'Teachers', 'Events', 'Library'],
                    datasets: [{
                        data: [150, 25, 30, 45],
                        backgroundColor: ['#1e4d9f', '#dc3545', '#10b981', '#ff8c00'],
                        borderWidth: 4,
                        borderColor: '#ffffff',
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    aspectRatio: 1,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 13
                            }
                        }
                    },
                    cutout: '60%'
                }
            });

            // Update chart with real data
            async function updatePieChart() {
                try {
                    const students = document.getElementById('totalStudents') ? parseInt(document.getElementById('totalStudents').textContent) || 150 : 150;
                    const teachers = document.getElementById('totalTeachers') ? parseInt(document.getElementById('totalTeachers').textContent) || 25 : 25;
                    
                    // Get events and library data
                    let events = 30;
                    let library = 45;
                    
                    try {
                        const eventsData = await apiRequest('/events/list.php');
                        if (eventsData && eventsData.success) {
                            events = eventsData.data.length;
                        }
                    } catch (e) {}
                    
                    try {
                        const libraryData = await apiRequest('/library/list.php');
                        if (libraryData && libraryData.success) {
                            library = libraryData.data.length;
                        }
                    } catch (e) {}

                    pieChart.data.datasets[0].data = [students, teachers, events, library];
                    pieChart.update();

                    // Update legend values
                    document.getElementById('legendStudents').textContent = students;
                    document.getElementById('legendTeachers').textContent = teachers;
                    document.getElementById('legendEvents').textContent = events;
                    document.getElementById('legendLibrary').textContent = library;
                } catch (error) {
                    console.error('Error updating pie chart:', error);
                }
            }

            // Update chart after data loads
            setTimeout(updatePieChart, 2000);
        }
    </script>
</body>
</html>
           
